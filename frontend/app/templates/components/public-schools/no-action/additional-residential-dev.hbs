<div class="ui message">
  <div class="header">
    Instructions
  </div>
  <p>
    If project build year is
    {{this.analysis.maxProjection}}
    or later consult lead agency if additional residential projects need to be added.
  </p>
  <p>
    If there is known double counting of an Additional No Action Residential Development within the provided projected data,
    remove it by adding a project with a negative number of units.
  </p>
</div>
<div class="ui {{if this.analysis.futureResidentialDev "top attached"}} segment">
  <form class="ui form" {{!-- template-lint-disable no-action --}} {{action "addResDev" this.resdev on="submit"}}>
    <div class="inline fields">
      <div class="field">
        <Input aria-label="residental development name" @type="string" @value={{this.resdev.name}} placeholder="Project Name" />
      </div>
      <div class="field">
        <Input aria-label="residential development year" @type="number" @value={{this.resdev.year}} placeholder="Est. Built Year"/>
      </div>
      <div class="field">
        <UiDropdown
          class="selection"
          @selected={{this.resdev.subdistrict}}
          {{!-- Dropdowns cannot pass functions without the linter auto-removing them --}}
          {{!-- template-lint-disable no-action --}}
          @onChange={{action (mut this.resdev.subdistrict)}} as |execute mapper|
        >
          <div class="default text">
            Subdistrict
          </div>
          <i class="dropdown icon"></i>
          <div class="menu">
            {{#each this.analysis.subdistricts as |sd|}}
              <div data-value={{map-value mapper sd}} class="item">
                District
                {{sd.district}}
                - Subdistrict
                {{sd.subdistrict}}
              </div>
            {{/each}}
          </div>
        </UiDropdown>
      </div>
      <div class="field">
        <Input aria-label="residential development total units" @type="number" @value={{this.resdev.total_units}} placeholder="Total Units" />
      </div>
      <button type="submit" class="ui button primary">
        Add
      </button>
    </div>
  </form>
</div>
{{#if this.analysis.futureResidentialDev}}
  <table class="ui bottom attached celled table">
    <thead>
      <tr>
        <th class="five wide">
          Project Name (Build Year)
        </th>
        <th class="two wide">
          Subdistrict
        </th>
        <th class="two wide">
          Total Units
        </th>
        <th class="two wide">
          Est. PS Students
        </th>
        <th class="two wide">
          Est. IS Students
        </th>
        <th class="two wide">
          Est. HS Students
        </th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {{#each this.analysis.futureResidentialDev as |r|}}
        <tr>
          <td>
            {{r.name}}
            (
            {{r.year}}
            )
          </td>
          <td>
            District
            {{r.district}}
            - Subdistrict
            {{r.subdistrict}}
          </td>
          <td>
            {{r.total_units}}
          </td>
          <td>
            {{r.ps_students}}
          </td>
          <td>
            {{r.is_students}}
          </td>
          <td>
            {{r.hs_students}}
          </td>
          <td>
            <button class="ui button red" type="button" {{on "click" (fn this.removeResDev r)}}>
              Delete
            </button>
          </td>
        </tr>
      {{/each}}
    </tbody>
  </table>
{{/if}}