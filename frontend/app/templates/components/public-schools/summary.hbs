<div class="ui basic top attached segment">
  <div class="ui secondary menu">
    <a
      class="item {{if (eq this.activeSchoolsLevel "ps") "active"}}"
      {{action (mut this.activeSchoolsLevel) "ps"}}
    >
      Primary Schools
    </a>
    <a
      class="item {{if (eq this.activeSchoolsLevel "is") "active"}}"
      {{action (mut this.activeSchoolsLevel) "is"}}
    >
      Intermediate Schools
    </a>
    <div class="ui divider"></div>
    {{#if this.analysis.hsAnalysis}}
      <div class="right menu">
        <a
          class="item {{if (eq this.activeSchoolsLevel "hs") "active"}}"
          {{action (mut this.activeSchoolsLevel) "hs"}}
        >
          High Schools (
          {{this.analysis.borough}}
          )
        </a>
      </div>
    {{/if}}
  </div>
</div>
<table class="ui bottom attached celled table">
  <thead>
    <tr>
      <th colspan="3"></th>
      <th colspan="2">
        Assumptions
      </th>
      <th colspan="2"></th>
    </tr>
    <tr>
      <th class="four wide"></th>
      <th class="two wide">
        Enrollment
      </th>
      <th class="two wide">
        Capacity
      </th>
      <th class="two wide">
        Enrollment Δ
      </th>
      <th class="two wide">
        Capacity Δ
      </th>
      <th class="two wide">
        Utilization %
      </th>
      <th class="two wide">
        Seats
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        Existing Conditions
      </td>
      <td>
        {{this.levelTotals.existingConditionsEnrollment}}
      </td>
      <td>
        {{this.levelTotals.existingConditionsCapacity}}
      </td>
      <td class="disabled">
        –
      </td>
      <td class="disabled">
        –
      </td>
      <td>
        {{percentage this.levelTotals.existingConditionsUtilization}}
      </td>
      <td>
        {{this.levelTotals.existingConditionsSeats}}
      </td>
    </tr>
    <tr>
      <td colspan="7"></td>
    </tr>
    <tr>
      <td>
        No Action
      </td>
      <td>
        {{this.levelTotals.noActionEnrollment}}
      </td>
      <td>
        {{this.levelTotals.noActionCapacity}}
      </td>
      <td>
        {{this.levelTotals.noActionEnrollmentDelta}}
      </td>
      <td>
        {{this.levelTotals.noActionCapacityDelta}}
      </td>
      <td>
        {{percentage this.levelTotals.noActionUtilization}}
      </td>
      <td>
        {{this.levelTotals.noActionSeats}}
      </td>
    </tr>
    <tr>
      <td>
        With Action
      </td>
      <td>
        {{this.levelTotals.withActionEnrollment}}
      </td>
      <td>
        {{this.levelTotals.withActionCapacity}}
      </td>
      <td>
        {{this.levelTotals.withActionEnrollmentDelta}}
      </td>
      <td>
        {{this.levelTotals.withActionCapacityDelta}}
      </td>
      <td>
        {{percentage this.levelTotals.withActionUtilization}}
      </td>
      <td>
        {{this.levelTotals.withActionSeats}}
      </td>
    </tr>
  </tbody>
</table>
<table class="ui celled table school-summary-sections">
  <thead>
    <tr>
      <th></th>
      <th class="two wide">
        Enrollment
      </th>
      <th class="two wide">
        Capacity
      </th>
    </tr>
  </thead>
  <tbody>
    {{! New Schools }}
    <tr
      onclick={{action "toggle" "EC_active"}}
      class="highlight
        {{unless this.EC_newSchoolsOpened.schools "disabled"}}

        {{if this.EC_active "open"}}"
    >
      <td class="section-name">
        <i class="caret {{if this.EC_active "down" "right"}} icon"></i>
        Existing Conditions - New Schools Opened
      </td>
      <td>
        {{this.EC_newSchoolsOpened.enrollment}}
      </td>
      <td>
        {{this.EC_newSchoolsOpened.capacity}}
      </td>
    </tr>
    {{#if this.EC_active}}
      {{#each this.EC_newSchoolsOpened.schools as |b|}}
        <tr>
          <td>
            {{b.name}}
          </td>
          <td>
            {{b.enroll}}
          </td>
          <td>
            {{b.capacity}}
          </td>
        </tr>
      {{/each}}
    {{/if}}
    <tr>
      <td class="disabled" colspan="3"></td>
    </tr>
    {{! New Residential Development }}
    <tr
      onclick={{action "toggle" "NA_resdev"}}
      class="highlight
        {{unless this.NA_newResidentialDevelopment.developments "disabled"}}

        {{if this.NA_resdev "open"}}"
    >
      <td class="section-name">
        <i class="caret {{if this.NA_resdev "down" "right"}} icon"></i>
        No Action - New Residential Development
      </td>
      <td>
        {{this.NA_newResidentialDevelopment.enrollment}}
      </td>
      <td class="disabled">
        –
      </td>
    </tr>
    {{#if this.NA_resdev}}
      {{#each this.NA_newResidentialDevelopment.developments as |b|}}
        <tr>
          <td>
            {{b.name}}
          </td>
          <td>
            {{b.enrollment}}
          </td>
          <td class="disabled">
            –
          </td>
        </tr>
      {{/each}}
      <tr>
        <td class="disabled" colspan="3"></td>
      </tr>
    {{/if}}
    {{! Planned Schools }}
    <tr
      onclick={{action "toggle" "NA_schools"}}
      class="highlight
        {{unless this.NA_plannedSchools.schools "disabled"}}

        {{if this.NA_schools "open"}}"
    >
      <td class="section-name">
        <i class="caret {{if this.NA_schools "down" "right"}} icon"></i>
        No Action - Capacity Δ from Planned Schools
      </td>
      <td class="disabled">
        –
      </td>
      <td>
        {{this.NA_plannedSchools.capacity}}
      </td>
    </tr>
    {{#if this.NA_schools}}
      {{#each this.NA_plannedSchools.schools as |b|}}
        <tr>
          <td>
            {{b.name}}
          </td>
          <td class="disabled">
            –
          </td>
          <td>
            {{b.capacity}}
          </td>
        </tr>
      {{/each}}
      <tr>
        <td class="disabled" colspan="3"></td>
      </tr>
    {{/if}}
    {{! Significant Utilization Changes }}
    <tr
      onclick={{action "toggle" "NA_utilchanges"}}
      class="highlight
        {{unless this.NA_significantUtilChanges.schools "disabled"}}

        {{if this.NA_utilchanges "open"}}"
    >
      <td class="section-name">
        <i class="caret {{if this.NA_utilchanges "down" "right"}} icon"></i>
        No Action - Capacity Δ from DOE Significant Utilization Changes
      </td>
      <td class="disabled">
        –
      </td>
      <td>
        {{this.NA_significantUtilChanges.capacityDelta}}
      </td>
    </tr>
    {{#if this.NA_utilchanges}}
      {{#each this.NA_significantUtilChanges.schools as |b|}}
        <tr>
          <td>
            {{b.name}}
          </td>
          <td class="disabled">
            –
          </td>
          <td>
            {{b.capacityDelta}}
          </td>
        </tr>
      {{/each}}
    {{/if}}
    <tr>
      <td class="disabled" colspan="3"></td>
    </tr>
    {{! With Action New Schools }}
    <tr
      onclick={{action "toggle" "WA_schools"}}
      class="highlight
        {{unless this.WA_newSchools.capacity "disabled"}}

        {{this.if this.WA_schools "open"}}"
    >
      <td class="section-name">
        <i class="caret {{if this.WA_schools "down" "right"}} icon"></i>
        With Action - Schools Proposed with Project
      </td>
      <td class="disabled">
        –
      </td>
      <td>
        {{this.WA_newSchools.capacity}}
      </td>
    </tr>
    {{#if this.WA_schools}}
      {{#each this.WA_newSchools.schools as |b|}}
        <tr>
          <td>
            {{b.name}}
          </td>
          <td class="disabled">
            –
          </td>
          <td>
            {{b.capacity}}
          </td>
        </tr>
      {{/each}}
    {{/if}}
  </tbody>
</table>
