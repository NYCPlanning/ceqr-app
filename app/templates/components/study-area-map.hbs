{{!-- 
Map should have

- Grey out other boroughs
- All elementary and intermediate schools
- Toggle to turn on high schools

 --}}


{{#mapbox-gl 
  id='study-area-map' mapLoaded=(action 'handleMapLoad') initOptions=(hash
    style='mapbox://styles/mapbox/light-v9'
    zoom=9.2
    center=(array -74 40.7071266)
  ) as |map| }}

  {{#if analysis.bblsPresent}}
    {{#map.source options=(hash type='geojson' data=(await analysis.subdistrictGeojson)) as |source|}}
      {{source.layer layer=(hash
        id='subdistricts'
        type='fill'
        paint=(hash fill-color='#2c7bb6' fill-opacity=0.6))
      }}
    {{/map.source}}

    {{#if (eq zoneDisplay 'es')}}
      {{#map.source options=(hash type='geojson' data=(await analysis.esZonesGeojson)) as |source|}}
        {{source.layer layer=(hash
          id='es-zones'
          type='line'
          paint=(hash
            line-color='#000000'
            line-width=2
            line-dasharray=(array 1 1)
          ))
        }}
      {{/map.source}}
    {{/if}}

    {{#if (eq zoneDisplay 'is')}}
      {{#map.source options=(hash type='geojson' data=(await analysis.isZonesGeojson)) as |source|}}
        {{source.layer layer=(hash
          id='ms-zones'
          type='line'
          paint=(hash
            line-color='#000000'
            line-width=2
            line-dasharray=(array 1 1)
          ))
        }}
      {{/map.source}}
    {{/if}}

    {{#if hsAnalysis}}
      {{#map.source options=(hash type='geojson' data=(await analysis.hsZonesGeojson)) as |source|}}
        {{source.layer layer=(hash
          id='hs-zones'
          type='line'
          paint=(hash
            line-color='#000000'
            line-width=2
            line-dasharray=(array 1 1)
          ))
        }}
      {{/map.source}}
    {{/if}}

    {{#map.source options=(hash type='geojson' data=(await analysis.bblGeojson)) as |source|}}
      {{source.layer layer=(hash 
        id='bbls'
        type='line'
        paint=(hash line-color='#d7191c' line-width=4 line-blur=1)
      )}}
    {{/map.source}}

    {{#map.source options=(hash type='geojson' data=(await analysis.lcgmsGeojson)) as |source|}}
      {{source.layer layer=(hash 
        id='lcgms'
        type='circle'
        paint=(hash circle-color='#1a9850')
      )}}
    {{/map.source}}

    {{#map.source options=(hash type='geojson' data=(await analysis.bluebookGeojson)) as |source|}}
      {{source.layer layer=(hash
        id='bluebook'
        type='circle'
        paint=(hash circle-color=(array "rgb" 247 202 0)))
      }}
    {{/map.source}}
  {{/if}}
{{/mapbox-gl}}
