{{!-- 
Get Mona to include correct grades served and citywide & alternative schools
 --}}

<div class="ui secondary pointing menu">
  {{#ui-dropdown class="item" selected=activeSdId onChange=(action (mut activeSdId))}}
    <div class="default text">{{defaultText}}</div>
    <i class="dropdown icon"></i>
    <div class="menu">
      {{#each data as |sd|}}
        <div data-value={{sd.sdId}} class="item">
          District {{sd.district}} - Subdistrict {{sd.subdistrict}}
        </div>
      {{/each}}
    </div>
  {{/ui-dropdown}}
  
  <a class="item {{if (eq activeSchoolsLevel 'ps') 'active'}}" {{action (mut activeSchoolsLevel) 'ps'}}>
    Primary Schools
  </a>
  <a class="item {{if (eq activeSchoolsLevel 'is') 'active'}}" {{action (mut activeSchoolsLevel) 'is'}}>
    Intermediate Schools
  </a>
</div>

<table class="ui celled sortable table">
  <thead>
    <tr>
      <th class="six wide">School Name</th>
      <th class="five wide">Address</th>
      <th class="one wide">Grades<br />Served</th>
      <th class="one wide">Enrollment</th>
      <th class="one wide">Target<br />Capacity</th>
      <th class="one wide">Available<br />Seats</th>
      <th class="one wide">Utilization (%)</th>
    </tr>
  </thead>

  <tbody>
    {{#each table.buildings as |b|}}
      {{#if (eq b.type 'lcgms')}}
        <tr class="{{b.type}} warning">
          <td>
            <i class="circle icon"></i>
            {{b.name}}
            {{#if (not-eq b.name b.bldg_name)}}
              <br /><em>{{b.bldg_name}}</em>
            {{/if}}
          </td>
          <td>{{b.address}}</td>
          <td>{{b.grades}}</td>
          <td>
            <div class="ui input transparent edit-cell">
              {{input type="number" value=b.enroll placeholder="0"}}
            </div>
          </td>
          <td>
            <div class="ui input transparent edit-cell">
              {{input type="number" value=b.capacity placeholder="0"}}
            </div>
          </td>
          <td>{{b.seats}}</td>
          <td>{{if b.excluded "N/A" b.utilization}}</td>
        </tr>
      {{else}}
        <tr class={{b.type}}>
          <td>
            <i class="circle icon"></i>
            {{b.name}}
            {{#if (not-eq b.name b.bldg_name)}}
              <br /><em>{{b.bldg_name}}</em>
            {{/if}}
          </td>
          <td>{{b.address}}</td>
          <td>{{b.grades}}</td>
          <td>{{b.enroll}}</td>
          <td>{{if b.excluded "N/A" b.capacity}}</td>
          <td>{{b.seats}}</td>
          <td>{{if b.excluded "N/A" b.utilization}}</td>
        </tr>
      {{/if}}
    {{/each}}
  </tbody>

  <tfoot>
    <tr>
      <th colspan="3"><em>Totals</em></th>
      <th>{{table.enrollmentTotal}}</th>
      <th>{{table.capacityTotal}}</th>
      <th>{{table.seatsTotal}}</th>
      <th>{{table.utilizationTotal}}</th>
    </tr>
  </tfoot>
</table>
